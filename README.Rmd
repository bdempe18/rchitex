---
output: 
  github_document
---

<!-- <style> -->

<!-- table, th, td { -->
<!-- border: 3 px solid green; -->
<!-- } -->

<!-- td { -->
<!--   style="padding: 0em;" -->
<!-- } -->

</style>

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# rchitex

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![Travis build status](https://travis-ci.org/bdempe18/rchitex.svg?branch=master)](https://travis-ci.org/bdempe18/rchitex)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/bdempe18/rchitex?branch=master&svg=true)](https://ci.appveyor.com/project/bdempe18/rchitex)
<!-- badges: end -->

Rchitex provides allows users to generate elegantly formatted text tables for summary statistics and regression models while simultaneously writing the equivalent LaTeX code for individual tables or full appendices to a local file. Rchitex is likewise capable of producing Latex and HTML tables for markdown files. Rchitex is intended to bridge the agp between statistical exploration in R and article writing.

## Installation

You will be able to install the released version of rchitex from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("rchitex")
```

And the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("bdempe18/rchitex")
```

Until development exceeds the experimental phase, the package will only be available on github.

## Text summary tables

Summary statistics can be simply produced by passing a data frame or tibble to `describe`. 

``` {r textTables}
suppressPackageStartupMessages(library(tidyverse))
state_df <- as_tibble(datasets::state.x77)
tbl_title <- 'State summary statistics'
rchitex::describe(state_df, title = tbl_title)

```
By default, describe will calculate the number of observations, mean, standard deviation, min, and max of the data. The summary functions applied can be altered and reordered by passing a named vector or list of functions to the `statistics` argument. The label of each function should be a string expressing how the function should be expressed in the table.

Note that `describe` supports user-defined functions as long as the function maps a vector of data to a single value, $f: \mathbb{R}^d \mapsto \mathbb{R}$.

``` {r}

stat_funcs <- c('Average' = mean, 'St.D.' = sd, 
                'random value' = function(v) sample(v, 1))
rchitex::describe(state_df, title = tbl_title, statistics = stat_funcs)

```

Futher aesthetical modifications are available. Users can adjust the level of precision by overriding the default value for `max_precision`. 

The whole table can be inverted by setting `flip` to True.

``` {r}
rchitex::describe(state_df[,2:5], title = tbl_title, statistics = stat_funcs, 
         max_precision = 0, flip = TRUE)
```
### Latex and HTML output
Rchitex is likewise capable of producing the code necessary to output tables in LaTeX and HTML formats. By specifying a `path`, Rchitex will write a .tex file to the inputted path while also outputting the text table to the standard consule. The text output can be supressed by setting `silent` to TRUE.

Rather than simultaneous output, rchitex can directly write LaTeX and HTML to the consule. This is particularly important if using a Markdown file (like this document). The `md` argument should either be set to 'latex' or 'html'. Note that you may need to set the chunk option `results` to 'asis'

``` {r, results = 'asis'}
rchitex::describe(state_df[,2:5], title = tbl_title, statistics = stat_funcs, 
         max_precision = 0, flip = TRUE, md = 'html')
```

``` {r, results = 'asis'}
data(swiss)
mod1 <- lm(data=swiss, Fertility ~ Agriculture + Education)
mod2 <- lm(data=swiss, Fertility ~ Agriculture + Education + Infant.Mortality + Catholic + Examination)

rchitex::build(mod1, mod2, md = 'html')
```
